<!DOCTYPE html><html lang="zh-cn"><head><title>HTTP协议 Cheat Sheet - One Piece Of Script</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><link rel="stylesheet" href="/modest.css"><link rel="stylesheet" href="/style.css"><link rel="icon" href="https://avatars0.githubusercontent.com/u/17768382?v=3&amp;s=32" type="image/x-icon"></head><body><div class="container"><div class="side-col"><div class="AuthorInfo"><img class="Avatar" src="https://avatars0.githubusercontent.com/u/17768382?v=3&amp;s=460"><h3>One Piece Of Script</h3><p>Progressive Enhancement</p></div><ul class="linklist"><li><a href="/">home</a></li><li><a href="../">about</a></li></ul></div><div class="main-content page-content"><div class="page-header"><h1 class="title">HTTP协议 Cheat Sheet</h1><ul class="page-meta"><li class="author">Tony Wang</li><li class="date">星期五, 2017 8月 11日 , 下午 4:15</li></ul></div><article class="markdown-body"><p>HTTP协议 Cheat Sheet<br><a id="more"></a></p>
<h1 id="HTTP协议-Cheat-Sheet"><a href="#HTTP协议-Cheat-Sheet" class="headerlink" title="HTTP协议 Cheat Sheet"></a>HTTP协议 Cheat Sheet</h1><p>HTTP协议基于TCP/IP协议来传递数据，属于应用层的一个协议。其作用于客户端/服务器架构之上，客户端向服务器请求服务时，只需要传送请求方法和路径，请求方法常用的有GET、POST，HTTP协议可以传输任意类型的数据对象，使用Content-Type加以标记。</p>
<ul>
<li>HTTP协议是一种无连接的协议，每次连接只处理一个请求，服务器处理完请求后收到客户应答后，断开连接。</li>
<li>HTTP协议是一种无状态的协议，对于事务处理没有记忆能力，如果后续处理需要前面的信息，则它必须重传。</li>
</ul>
<p>HTTP使用统一资源标识符来传输数据和建立连接，URL包含了协议、域名、端口、虚拟目录、文件名、锚、参数</p>
<p>Request请求 包括了请求行、请求头部、空行和请求数据四个部分</p>
<ul>
<li>请求行用来说明请求类型，要访问的资源以及所使用的HTTP版本</li>
<li>请求头部用来说明服务要使用的附加信息，包括host、User-Agent、Accept、Referer、content-type、conncetion等</li>
<li>空行是必须的</li>
<li>请求数据</li>
</ul>
<p>Response响应，包括状态行、消息报头、空行、响应正文</p>
<ul>
<li>状态行由HTTP协议版本号、状态吗、状态消息三部分组成</li>
<li>消息报头用来说明客户端要使用的一些附加信息，比如Date、Content-Type</li>
<li>空行是必须的</li>
<li>响应正文，服务器返回给客户端的文本信息</li>
</ul>
<p>HTTP状态吗分类</p>
<ul>
<li>1xx: 表示请求已接受，继续处理</li>
<li>2xx: 成功，表示请求已被成功处理</li>
<li>3xx: 重定向</li>
<li>4xx: 客户端错误（Bad Request/ Unauthorized/ Forbidden/ Not Found）</li>
<li>5xx: 服务器错误（Internal Server Error/ Server Unavailable）</li>
</ul>
<p>HTTP请求的方法</p>
<ul>
<li>GET 一般用于获取，提交的数据会放在URL之后，大小有限制，提交数据有安全问题</li>
<li>HEAD</li>
<li>POST 一般用于修改，大小无限制，提交的数据放在HTTP的body中，较为安全</li>
<li>PUT 一般用于增加</li>
<li>DELETE 一般用于删除</li>
<li>CONNECT</li>
<li>OPTION</li>
<li>TRACE</li>
</ul>
<p>HTTP工作原理</p>
<p>客户端连接到Web服务器，与Web服务器的HTTP端口建立一个TCP套接字链接</p>
<p>然后通过TCP套接字，客户端向Web服务器发送一个文本的请求报文</p>
<p>服务器接受请求并返回HTTP响应，Web服务器解析请求，定位请求资源，服务器将资源复本写到TCP套接字，由客户端读取。</p>
<p>若connection模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接，若connection模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接受请求</p>
<p>客户端浏览器首先解析状态行，查看请求是否成功的状态吗，然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集，客户端浏览器读取响应数据HTML，根据HTML的语法对其进行改格式化，并在浏览器窗口中显示</p>
<p>例如，在浏览器地址栏键入URL后<br>1 浏览器向DNS服务器请求解析该URL的域名所对应的IP<br>2 解析出IP后，根据IP和默认端口80，和服务器建立TCP连接<br>3 浏览器发出读取文件的HTTP请求，该报文作为TCP三次握手的第三个报文的数据发送给服务器<br>4 服务器对浏览器请求做出响应，并把对应的html文本发送给浏览器<br>5 释放TCP连接<br>6 浏览器显示HTML文本内容</p>
</article></div></div></body></html>